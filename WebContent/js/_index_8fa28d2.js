var require,define;!function(a){if(!require){var c=document.getElementsByTagName("head")[0],h={},v={},y={},g={},j={},T={},C=function(a,h){if(!(a in g)){g[a]=!0;var v=document.createElement("script");if(h){var y=setTimeout(h,require.timeout);v.onerror=function(){clearTimeout(y),h()};var j=function(){clearTimeout(y)};"onload"in v?v.onload=j:v.onreadystatechange=function(){("loaded"===this.readyState||"complete"===this.readyState)&&j()}}return v.type="text/javascript",v.src=a,c.appendChild(v),v}},S=function(a,c,v){var y=h[a]||(h[a]=[]);y.push(c);var g,S=j[a]||j[a+".js"]||{},E=S.pkg;g=E?T[E].url:S.url||a,C(g,v&&function(){v(a)})};define=function(a,c){a=a.replace(/\.js$/i,""),v[a]=c;var y=h[a];if(y){for(var i=0,n=y.length;n>i;i++)y[i]();delete h[a]}},require=function(a){if(a&&a.splice)return require.async.apply(this,arguments);a=require.alias(a);var mod=y[a];if(mod)return mod.exports;var c=v[a];if(!c)throw"[ModJS] Cannot find module `"+a+"`";mod=y[a]={exports:{}};var h="function"==typeof c?c.apply(mod,[require,mod.exports,mod]):c;return h&&(mod.exports=h),mod.exports&&!mod.exports["default"]&&(mod.exports["default"]=mod.exports),mod.exports},require.async=function(c,h,y){function g(a){for(var c,i=0,n=a.length;n>i;i++){var h=require.alias(a[i]);h in v?(c=j[h]||j[h+".js"],c&&"deps"in c&&g(c.deps)):h in C||(C[h]=!0,E++,S(h,T,y),c=j[h]||j[h+".js"],c&&"deps"in c&&g(c.deps))}}function T(){if(0===E--){for(var v=[],i=0,n=c.length;n>i;i++)v[i]=require(c[i]);h&&h.apply(a,v)}}"string"==typeof c&&(c=[c]);var C={},E=0;g(c),T()},require.resourceMap=function(a){var c,h;h=a.res;for(c in h)h.hasOwnProperty(c)&&(j[c]=h[c]);h=a.pkg;for(c in h)h.hasOwnProperty(c)&&(T[c]=h[c])},require.loadJs=function(a){C(a)},require.loadCss=function(a){if(a.content){var h=document.createElement("style");h.type="text/css",h.styleSheet?h.styleSheet.cssText=a.content:h.innerHTML=a.content,c.appendChild(h)}else if(a.url){var v=document.createElement("link");v.href=a.url,v.rel="stylesheet",v.type="text/css",c.appendChild(v)}},require.alias=function(a){return a.replace(/\.js$/i,"")},require.timeout=5e3}}(this);
define("src/modules/header/header",function(){!function(){var a=function(){},c={init:function(){var c=this;c.render(),c.checkLogin();var g=$(".g-head2");g.on("focus",".g-item-search input[type='text']",function(){g.find(".g-search-tips").show()}).on("blur",".g-item-search input[type='text']",function(){setTimeout(function(){g.find(".g-search-tips").hide()},500)}),g.on("click",".g-btns-login",function(){dwUDBProxy.login(a)}).on("click",".g-btns-loggout",function(){dwUDBProxy.logout("")}),g.on("click",".navlink-1",function(){return dwUDBProxy.isLogin()?void 0:(dwUDBProxy.login(a),!1)});var y=g.attr("data-channel");y?$(".g-logo-channel").html(y).show():$(".g-logo-subtitle").show();var h=location.host;h.indexOf("video.duowan.com")>-1&&(g.find(".g-item-search").attr("action","http://video.duowan.com/"),g.find(".g-item-search input[type=text]").attr("name","w"),g.find(".g-item-search input[type=hidden]").attr("name","r").val("search/index"))},render:function(){var a=$("#g-head_navinner").html();$("#g-head_navinner").replaceWith(a)},getUserInfo:function(a){var c="http://bbs.duowan.com/api/getavatar.php?uid="+a;$.ajax({url:c,dataType:"jsonp",success:function(a){a.msg&&a.msg.small&&$(".g-uinfo-avatar img").attr("src",a.msg.small)}})},checkLogin:function(){var a=this;dwUDBProxy.add&&dwUDBProxy.add(function(c){$(".g-uinfo-name").html(c.username),$(".g-item-uinfo").show(),$(".g-item-btns").hide(),$(".user-message").show(),a.getUserInfo(c.yyuid),$.getScript("http://plus.duowan.com/static/widget/plus/plus.js")}),dwUDBProxy.isLogin()||$(".g-item-btns").show()}};c.init()}(),function(){var a={},c=(function(){$("[data-dom]").each(function(i,c){var g=$(c),y=g.data("dom");g.removeAttr("data-dom"),a[y]=c})}(),{getMessage:function(){$.when($.ajax({url:"http://push.duowan.com/index.php?r=msg/getUnreadNum&event_code=comment_add,comment_vote&yyuid="+dwUDBProxy.getCookie("yyuid"),dataType:"jsonp"}),$.ajax({url:"http://video.duowan.com/jsapi/msgCountNew",dataType:"jsonp"}),$.ajax({url:"http://bbs.duowan.com/api/uinfo4dw.php?op=getmessage&yyuid"+dwUDBProxy.getCookie("yyuid"),dataType:"jsonp"})).done(function(c,g,y){c[0].comment_add=parseInt(c[0].comment_add),c[0].comment_vote=parseInt(c[0].comment_vote),g[0].count=parseInt(g[0].count),y[0].newpm=parseInt(y[0].newpm),y[0].notice=parseInt(y[0].notice),c[0].comment_add?a.reply.innerHTML=c[0].comment_add:a.reply.style.display="none",c[0].comment_vote?a.agree.innerHTML=c[0].comment_vote:a.agree.style.display="none",g[0].count?a.msgSys.innerHTML=g[0].count:a.msgSys.style.display="none",y[0].notice?a.forumNt.innerHTML=y[0].notice:a.forumNt.style.display="none",y[0].newpm?a.forumPm.innerHTML=y[0].newpm:a.forumPm.style.display="none"}).then(function(c,g,y){var h=c[0].comment_add+c[0].comment_vote+g[0].count+y[0].notice+y[0].newpm;h&&(a.allMsg.innerHTML=h,a.allMsg.style.display="block")})}}),g=$.Callbacks("memory");g.add(function(){var a=c.getMessage;dwUDBProxy.add?dwUDBProxy.add(a):dwUDBProxy.isLogin()&&a()}),window.dwUDBProxy?g.fire():Util.getScript("//pub.dwstatic.com/common/js/dwudbproxy.js",function(){g.fire()})}()});
define("src/modules/sealoader/sealoader",function(require,exports,module){function a(a){var y=window.jQuery;if(!c&&y){c=!0;var g=function(){return y};seajs.define("jquery",g),seajs.define("$",g),seajs.define("$-debug",g),y.browser&&seajs.define("gallery/jquery-plugin/jquery-migrate",g)}a&&a(seajs)}var c=!1;if(window.seajs)module.exports=a;else{var y=function(){var a=/loaded|complete/,c=document.getElementsByTagName("head")[0]||document.documentElement,y=c.getElementsByTagName("base")[0];return function(g,j,h){function v(){w.onload=w.onerror=w.onreadystatechange=null,c.removeChild(w),w=null,j&&j()}var w=document.createElement("script");"onload"in w?w.onerror=w.onload=v:w.onreadystatechange=function(){a.test(w.readyState)&&v()},w.async=!0,w.src=g,h&&(w.id=h),y?c.insertBefore(w,y):c.appendChild(w)}}(),g=!0;module.exports=function(c){g?g===!0?(g=[c],y("http://assets.dwstatic.com/amkit/entry.js",function(){for(var c,i=0,y=g.length;y>i;i++)c=g[i],c&&a(c);g=null})):g.push(c):a(c)}}});
define("src/modules/underscore/underscore",function(require,exports,module){(function(){function a(a){function c(c,h,v,g,y,b){for(;y>=0&&b>y;y+=a){var _=g?g[y]:y;v=h(v,c[_],_,c)}return v}return function(h,v,g,y){v=I(v,y,4);var b=!z(h)&&N.keys(h),_=(b||h).length,j=a>0?0:_-1;return arguments.length<3&&(g=h[b?b[j]:j],j+=a),c(h,v,g,b,j,_)}}function c(a){return function(c,h,v){h=B(h,v);for(var g=null!=c&&c.length,y=a>0?0:g-1;y>=0&&g>y;y+=a)if(h(c[y],y,c))return y;return-1}}function h(a,c){var h=J.length,v=a.constructor,g=N.isFunction(v)&&v.prototype||b,y="constructor";for(N.has(a,y)&&!N.contains(c,y)&&c.push(y);h--;)y=J[h],y in a&&a[y]!==g[y]&&!N.contains(c,y)&&c.push(y)}var v=this,g=v._,y=Array.prototype,b=Object.prototype,_=Function.prototype,j=y.push,w=y.slice,A=b.toString,O=b.hasOwnProperty,k=Array.isArray,F=Object.keys,S=_.bind,E=Object.create,M=function(){},N=function(a){return a instanceof N?a:this instanceof N?void(this._wrapped=a):new N(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=N),exports._=N):v._=N,N.VERSION="1.8.2";var I=function(a,c,h){if(void 0===c)return a;switch(null==h?3:h){case 1:return function(h){return a.call(c,h)};case 2:return function(h,v){return a.call(c,h,v)};case 3:return function(h,v,g){return a.call(c,h,v,g)};case 4:return function(h,v,g,y){return a.call(c,h,v,g,y)}}return function(){return a.apply(c,arguments)}},B=function(a,c,h){return null==a?N.identity:N.isFunction(a)?I(a,c,h):N.isObject(a)?N.matcher(a):N.property(a)};N.iteratee=function(a,c){return B(a,c,1/0)};var T=function(a,c){return function(h){var v=arguments.length;if(2>v||null==h)return h;for(var g=1;v>g;g++)for(var y=arguments[g],b=a(y),l=b.length,i=0;l>i;i++){var _=b[i];c&&void 0!==h[_]||(h[_]=y[_])}return h}},R=function(a){if(!N.isObject(a))return{};if(E)return E(a);M.prototype=a;var c=new M;return M.prototype=null,c},K=Math.pow(2,53)-1,z=function(a){var c=null!=a&&a.length;return"number"==typeof c&&c>=0&&K>=c};N.each=N.forEach=function(a,c,h){c=I(c,h);var i,v;if(z(a))for(i=0,v=a.length;v>i;i++)c(a[i],i,a);else{var g=N.keys(a);for(i=0,v=g.length;v>i;i++)c(a[g[i]],g[i],a)}return a},N.map=N.collect=function(a,c,h){c=B(c,h);for(var v=!z(a)&&N.keys(a),g=(v||a).length,y=Array(g),b=0;g>b;b++){var _=v?v[b]:b;y[b]=c(a[_],_,a)}return y},N.reduce=N.foldl=N.inject=a(1),N.reduceRight=N.foldr=a(-1),N.find=N.detect=function(a,c,h){var v;return v=z(a)?N.findIndex(a,c,h):N.findKey(a,c,h),void 0!==v&&-1!==v?a[v]:void 0},N.filter=N.select=function(a,c,h){var v=[];return c=B(c,h),N.each(a,function(a,h,g){c(a,h,g)&&v.push(a)}),v},N.reject=function(a,c,h){return N.filter(a,N.negate(B(c)),h)},N.every=N.all=function(a,c,h){c=B(c,h);for(var v=!z(a)&&N.keys(a),g=(v||a).length,y=0;g>y;y++){var b=v?v[y]:y;if(!c(a[b],b,a))return!1}return!0},N.some=N.any=function(a,c,h){c=B(c,h);for(var v=!z(a)&&N.keys(a),g=(v||a).length,y=0;g>y;y++){var b=v?v[y]:y;if(c(a[b],b,a))return!0}return!1},N.contains=N.includes=N.include=function(a,c,h){return z(a)||(a=N.values(a)),N.indexOf(a,c,"number"==typeof h&&h)>=0},N.invoke=function(a,c){var h=w.call(arguments,2),v=N.isFunction(c);return N.map(a,function(a){var g=v?c:a[c];return null==g?g:g.apply(a,h)})},N.pluck=function(a,c){return N.map(a,N.property(c))},N.where=function(a,c){return N.filter(a,N.matcher(c))},N.findWhere=function(a,c){return N.find(a,N.matcher(c))},N.max=function(a,c,h){var v,g,y=-1/0,b=-1/0;if(null==c&&null!=a){a=z(a)?a:N.values(a);for(var i=0,_=a.length;_>i;i++)v=a[i],v>y&&(y=v)}else c=B(c,h),N.each(a,function(a,h,v){g=c(a,h,v),(g>b||g===-1/0&&y===-1/0)&&(y=a,b=g)});return y},N.min=function(a,c,h){var v,g,y=1/0,b=1/0;if(null==c&&null!=a){a=z(a)?a:N.values(a);for(var i=0,_=a.length;_>i;i++)v=a[i],y>v&&(y=v)}else c=B(c,h),N.each(a,function(a,h,v){g=c(a,h,v),(b>g||1/0===g&&1/0===y)&&(y=a,b=g)});return y},N.shuffle=function(a){for(var c,h=z(a)?a:N.values(a),v=h.length,g=Array(v),y=0;v>y;y++)c=N.random(0,y),c!==y&&(g[y]=g[c]),g[c]=h[y];return g},N.sample=function(a,n,c){return null==n||c?(z(a)||(a=N.values(a)),a[N.random(a.length-1)]):N.shuffle(a).slice(0,Math.max(0,n))},N.sortBy=function(a,c,h){return c=B(c,h),N.pluck(N.map(a,function(a,h,v){return{value:a,index:h,criteria:c(a,h,v)}}).sort(function(a,c){var h=a.criteria,v=c.criteria;if(h!==v){if(h>v||void 0===h)return 1;if(v>h||void 0===v)return-1}return a.index-c.index}),"value")};var D=function(a){return function(c,h,v){var g={};return h=B(h,v),N.each(c,function(v,y){var b=h(v,y,c);a(g,v,b)}),g}};N.groupBy=D(function(a,c,h){N.has(a,h)?a[h].push(c):a[h]=[c]}),N.indexBy=D(function(a,c,h){a[h]=c}),N.countBy=D(function(a,c,h){N.has(a,h)?a[h]++:a[h]=1}),N.toArray=function(a){return a?N.isArray(a)?w.call(a):z(a)?N.map(a,N.identity):N.values(a):[]},N.size=function(a){return null==a?0:z(a)?a.length:N.keys(a).length},N.partition=function(a,c,h){c=B(c,h);var v=[],g=[];return N.each(a,function(a,h,y){(c(a,h,y)?v:g).push(a)}),[v,g]},N.first=N.head=N.take=function(a,n,c){return null==a?void 0:null==n||c?a[0]:N.initial(a,a.length-n)},N.initial=function(a,n,c){return w.call(a,0,Math.max(0,a.length-(null==n||c?1:n)))},N.last=function(a,n,c){return null==a?void 0:null==n||c?a[a.length-1]:N.rest(a,Math.max(0,a.length-n))},N.rest=N.tail=N.drop=function(a,n,c){return w.call(a,null==n||c?1:n)},N.compact=function(a){return N.filter(a,N.identity)};var L=function(a,c,h,v){for(var g=[],y=0,i=v||0,b=a&&a.length;b>i;i++){var _=a[i];if(z(_)&&(N.isArray(_)||N.isArguments(_))){c||(_=L(_,c,h));var j=0,w=_.length;for(g.length+=w;w>j;)g[y++]=_[j++]}else h||(g[y++]=_)}return g};N.flatten=function(a,c){return L(a,c,!1)},N.without=function(a){return N.difference(a,w.call(arguments,1))},N.uniq=N.unique=function(a,c,h,v){if(null==a)return[];N.isBoolean(c)||(v=h,h=c,c=!1),null!=h&&(h=B(h,v));for(var g=[],y=[],i=0,b=a.length;b>i;i++){var _=a[i],j=h?h(_,i,a):_;c?(i&&y===j||g.push(_),y=j):h?N.contains(y,j)||(y.push(j),g.push(_)):N.contains(g,_)||g.push(_)}return g},N.union=function(){return N.uniq(L(arguments,!0,!0))},N.intersection=function(a){if(null==a)return[];for(var c=[],h=arguments.length,i=0,v=a.length;v>i;i++){var g=a[i];if(!N.contains(c,g)){for(var y=1;h>y&&N.contains(arguments[y],g);y++);y===h&&c.push(g)}}return c},N.difference=function(a){var c=L(arguments,!0,!0,1);return N.filter(a,function(a){return!N.contains(c,a)})},N.zip=function(){return N.unzip(arguments)},N.unzip=function(a){for(var c=a&&N.max(a,"length").length||0,h=Array(c),v=0;c>v;v++)h[v]=N.pluck(a,v);return h},N.object=function(a,c){for(var h={},i=0,v=a&&a.length;v>i;i++)c?h[a[i]]=c[i]:h[a[i][0]]=a[i][1];return h},N.indexOf=function(a,c,h){var i=0,v=a&&a.length;if("number"==typeof h)i=0>h?Math.max(0,v+h):h;else if(h&&v)return i=N.sortedIndex(a,c),a[i]===c?i:-1;if(c!==c)return N.findIndex(w.call(a,i),N.isNaN);for(;v>i;i++)if(a[i]===c)return i;return-1},N.lastIndexOf=function(a,c,h){var v=a?a.length:0;if("number"==typeof h&&(v=0>h?v+h+1:Math.min(v,h+1)),c!==c)return N.findLastIndex(w.call(a,0,v),N.isNaN);for(;--v>=0;)if(a[v]===c)return v;return-1},N.findIndex=c(1),N.findLastIndex=c(-1),N.sortedIndex=function(a,c,h,v){h=B(h,v,1);for(var g=h(c),y=0,b=a.length;b>y;){var _=Math.floor((y+b)/2);h(a[_])<g?y=_+1:b=_}return y},N.range=function(a,c,h){arguments.length<=1&&(c=a||0,a=0),h=h||1;for(var v=Math.max(Math.ceil((c-a)/h),0),g=Array(v),y=0;v>y;y++,a+=h)g[y]=a;return g};var P=function(a,c,h,v,g){if(!(v instanceof c))return a.apply(h,g);var y=R(a.prototype),b=a.apply(y,g);return N.isObject(b)?b:y};N.bind=function(a,c){if(S&&a.bind===S)return S.apply(a,w.call(arguments,1));if(!N.isFunction(a))throw new TypeError("Bind must be called on a function");var h=w.call(arguments,2),v=function(){return P(a,v,c,this,h.concat(w.call(arguments)))};return v},N.partial=function(a){var c=w.call(arguments,1),h=function(){for(var v=0,g=c.length,y=Array(g),i=0;g>i;i++)y[i]=c[i]===N?arguments[v++]:c[i];for(;v<arguments.length;)y.push(arguments[v++]);return P(a,h,this,this,y)};return h},N.bindAll=function(a){var i,c,h=arguments.length;if(1>=h)throw new Error("bindAll must be passed function names");for(i=1;h>i;i++)c=arguments[i],a[c]=N.bind(a[c],a);return a},N.memoize=function(a,c){var h=function(v){var g=h.cache,y=""+(c?c.apply(this,arguments):v);return N.has(g,y)||(g[y]=a.apply(this,arguments)),g[y]};return h.cache={},h},N.delay=function(a,c){var h=w.call(arguments,2);return setTimeout(function(){return a.apply(null,h)},c)},N.defer=N.partial(N.delay,N,1),N.throttle=function(a,c,h){var v,g,y,b=null,_=0;h||(h={});var j=function(){_=h.leading===!1?0:N.now(),b=null,y=a.apply(v,g),b||(v=g=null)};return function(){var w=N.now();_||h.leading!==!1||(_=w);var A=c-(w-_);return v=this,g=arguments,0>=A||A>c?(b&&(clearTimeout(b),b=null),_=w,y=a.apply(v,g),b||(v=g=null)):b||h.trailing===!1||(b=setTimeout(j,A)),y}},N.debounce=function(a,c,h){var v,g,y,b,_,j=function(){var w=N.now()-b;c>w&&w>=0?v=setTimeout(j,c-w):(v=null,h||(_=a.apply(y,g),v||(y=g=null)))};return function(){y=this,g=arguments,b=N.now();var w=h&&!v;return v||(v=setTimeout(j,c)),w&&(_=a.apply(y,g),y=g=null),_}},N.wrap=function(a,c){return N.partial(c,a)},N.negate=function(a){return function(){return!a.apply(this,arguments)}},N.compose=function(){var a=arguments,c=a.length-1;return function(){for(var i=c,h=a[c].apply(this,arguments);i--;)h=a[i].call(this,h);return h}},N.after=function(a,c){return function(){return--a<1?c.apply(this,arguments):void 0}},N.before=function(a,c){var h;return function(){return--a>0&&(h=c.apply(this,arguments)),1>=a&&(c=null),h}},N.once=N.partial(N.before,2);var C=!{toString:null}.propertyIsEnumerable("toString"),J=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];N.keys=function(a){if(!N.isObject(a))return[];if(F)return F(a);var c=[];for(var v in a)N.has(a,v)&&c.push(v);return C&&h(a,c),c},N.allKeys=function(a){if(!N.isObject(a))return[];var c=[];for(var v in a)c.push(v);return C&&h(a,c),c},N.values=function(a){for(var c=N.keys(a),h=c.length,v=Array(h),i=0;h>i;i++)v[i]=a[c[i]];return v},N.mapObject=function(a,c,h){c=B(c,h);for(var v,g=N.keys(a),y=g.length,b={},_=0;y>_;_++)v=g[_],b[v]=c(a[v],v,a);return b},N.pairs=function(a){for(var c=N.keys(a),h=c.length,v=Array(h),i=0;h>i;i++)v[i]=[c[i],a[c[i]]];return v},N.invert=function(a){for(var c={},h=N.keys(a),i=0,v=h.length;v>i;i++)c[a[h[i]]]=h[i];return c},N.functions=N.methods=function(a){var c=[];for(var h in a)N.isFunction(a[h])&&c.push(h);return c.sort()},N.extend=T(N.allKeys),N.extendOwn=N.assign=T(N.keys),N.findKey=function(a,c,h){c=B(c,h);for(var v,g=N.keys(a),i=0,y=g.length;y>i;i++)if(v=g[i],c(a[v],v,a))return v},N.pick=function(a,c,h){var v,g,y={},b=a;if(null==b)return y;N.isFunction(c)?(g=N.allKeys(b),v=I(c,h)):(g=L(arguments,!1,!1,1),v=function(a,c,h){return c in h},b=Object(b));for(var i=0,_=g.length;_>i;i++){var j=g[i],w=b[j];v(w,j,b)&&(y[j]=w)}return y},N.omit=function(a,c,h){if(N.isFunction(c))c=N.negate(c);else{var v=N.map(L(arguments,!1,!1,1),String);c=function(a,c){return!N.contains(v,c)}}return N.pick(a,c,h)},N.defaults=T(N.allKeys,!0),N.create=function(a,c){var h=R(a);return c&&N.extendOwn(h,c),h},N.clone=function(a){return N.isObject(a)?N.isArray(a)?a.slice():N.extend({},a):a},N.tap=function(a,c){return c(a),a},N.isMatch=function(a,c){var h=N.keys(c),v=h.length;if(null==a)return!v;for(var g=Object(a),i=0;v>i;i++){var y=h[i];if(c[y]!==g[y]||!(y in g))return!1}return!0};var eq=function(a,c,h,v){if(a===c)return 0!==a||1/a===1/c;if(null==a||null==c)return a===c;a instanceof N&&(a=a._wrapped),c instanceof N&&(c=c._wrapped);var g=A.call(a);if(g!==A.call(c))return!1;switch(g){case"[object RegExp]":case"[object String]":return""+a==""+c;case"[object Number]":return+a!==+a?+c!==+c:0===+a?1/+a===1/c:+a===+c;case"[object Date]":case"[object Boolean]":return+a===+c}var y="[object Array]"===g;if(!y){if("object"!=typeof a||"object"!=typeof c)return!1;var b=a.constructor,_=c.constructor;if(b!==_&&!(N.isFunction(b)&&b instanceof b&&N.isFunction(_)&&_ instanceof _)&&"constructor"in a&&"constructor"in c)return!1}h=h||[],v=v||[];for(var j=h.length;j--;)if(h[j]===a)return v[j]===c;if(h.push(a),v.push(c),y){if(j=a.length,j!==c.length)return!1;for(;j--;)if(!eq(a[j],c[j],h,v))return!1}else{var w,O=N.keys(a);if(j=O.length,N.keys(c).length!==j)return!1;for(;j--;)if(w=O[j],!N.has(c,w)||!eq(a[w],c[w],h,v))return!1}return h.pop(),v.pop(),!0};N.isEqual=function(a,c){return eq(a,c)},N.isEmpty=function(a){return null==a?!0:z(a)&&(N.isArray(a)||N.isString(a)||N.isArguments(a))?0===a.length:0===N.keys(a).length},N.isElement=function(a){return!(!a||1!==a.nodeType)},N.isArray=k||function(a){return"[object Array]"===A.call(a)},N.isObject=function(a){var c=typeof a;return"function"===c||"object"===c&&!!a},N.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(a){N["is"+a]=function(c){return A.call(c)==="[object "+a+"]"}}),N.isArguments(arguments)||(N.isArguments=function(a){return N.has(a,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(N.isFunction=function(a){return"function"==typeof a||!1}),N.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},N.isNaN=function(a){return N.isNumber(a)&&a!==+a},N.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===A.call(a)},N.isNull=function(a){return null===a},N.isUndefined=function(a){return void 0===a},N.has=function(a,c){return null!=a&&O.call(a,c)},N.noConflict=function(){return v._=g,this},N.identity=function(a){return a},N.constant=function(a){return function(){return a}},N.noop=function(){},N.property=function(a){return function(c){return null==c?void 0:c[a]}},N.propertyOf=function(a){return null==a?function(){}:function(c){return a[c]}},N.matcher=N.matches=function(a){return a=N.extendOwn({},a),function(c){return N.isMatch(c,a)}},N.times=function(n,a,c){var h=Array(Math.max(0,n));a=I(a,c,1);for(var i=0;n>i;i++)h[i]=a(i);return h},N.random=function(a,c){return null==c&&(c=a,a=0),a+Math.floor(Math.random()*(c-a+1))},N.now=Date.now||function(){return(new Date).getTime()};var U={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},V=N.invert(U),W=function(a){var c=function(c){return a[c]},h="(?:"+N.keys(a).join("|")+")",v=RegExp(h),g=RegExp(h,"g");return function(a){return a=null==a?"":""+a,v.test(a)?a.replace(g,c):a}};N.escape=W(U),N.unescape=W(V),N.result=function(a,c,h){var v=null==a?void 0:a[c];return void 0===v&&(v=h),N.isFunction(v)?v.call(a):v};var $=0;N.uniqueId=function(a){var c=++$+"";return a?a+c:c},N.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var G=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Q=/\\|'|\r|\n|\u2028|\u2029/g,X=function(a){return"\\"+H[a]};N.template=function(a,c,h){!c&&h&&(c=h),c=N.defaults({},c,N.templateSettings);var v=RegExp([(c.escape||G).source,(c.interpolate||G).source,(c.evaluate||G).source].join("|")+"|$","g"),g=0,y="__p+='";a.replace(v,function(c,h,v,b,_){return y+=a.slice(g,_).replace(Q,X),g=_+c.length,h?y+="'+\n((__t=("+h+"))==null?'':_.escape(__t))+\n'":v?y+="'+\n((__t=("+v+"))==null?'':__t)+\n'":b&&(y+="';\n"+b+"\n__p+='"),c}),y+="';\n",c.variable||(y="with(obj||{}){\n"+y+"}\n"),y="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+y+"return __p;\n";try{var b=new Function(c.variable||"obj","_",y)}catch(e){throw e.source=y,e}var _=function(a){return b.call(this,a,N)},j=c.variable||"obj";return _.source="function("+j+"){\n"+y+"}",_},N.chain=function(a){var c=N(a);return c._chain=!0,c};var Y=function(a,c){return a._chain?N(c).chain():c};N.mixin=function(a){N.each(N.functions(a),function(c){var h=N[c]=a[c];N.prototype[c]=function(){var a=[this._wrapped];return j.apply(a,arguments),Y(this,h.apply(N,a))}})},N.mixin(N),N.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var c=y[a];N.prototype[a]=function(){var h=this._wrapped;return c.apply(h,arguments),"shift"!==a&&"splice"!==a||0!==h.length||delete h[0],Y(this,h)}}),N.each(["concat","join","slice"],function(a){var c=y[a];N.prototype[a]=function(){return Y(this,c.apply(this._wrapped,arguments))}}),N.prototype.value=function(){return this._wrapped},N.prototype.valueOf=N.prototype.toJSON=N.prototype.value,N.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return N})}).call(this)});
define("src/modules/index/primary",function(require,exports,module){var carousel,carouselSlide,gameTalkSlide,seaLoader=require("src/modules/sealoader/sealoader"),tplReload=(require("src/modules/underscore/underscore"),function(obj){{var __p="";Array.prototype.join}with(obj||{})__p+='<div class="g-ui-reload">\r\n    <div class="reload-before">\r\n        <p>服务君歇息了</p>\r\n        <a href="javascript:;" class="btn-reload">点击重试</a>\r\n    </div>\r\n    <div class="reload-ing"></div>\r\n</div>';return __p}),V={init:function(a){a.use(["arale/switchable/1.0.2/carousel"],function(a){carousel=a,V.newCarousel()}),a.use(["arale/switchable/1.0.2/tabs"],function(a){new a({element:'[data-role="tab-primary"]',triggers:".news-ui-tab__trigger.is-trigger",classPrefix:null,activeTriggerClass:"is-active"})})},newCarousel:function(){$('[data-role="slide-primary"]').find(".ui-slide__trigger").removeClass("is-active"),$('[data-role="slide-gametalk"]').find(".ui-slide__trigger").removeClass("is-active");var a=$(".sp-primary-wrap .ui-slide__nav").children();carouselSlide=new carousel({element:'[data-role="slide-primary"]',classPrefix:null,activeTriggerClass:"is-active",interval:6e3,autoplay:!0,effect:"scrollx"}).render(),a.eq(0).addClass("is-active"),carouselSlide.on("change:activeIndex",function(c){$('[data-role="slide-primary"]').find(".ui-slide__current").text(c+1),a.removeClass("is-active").eq(c).addClass("is-active")}),gameTalkSlide=new carousel({element:'[data-role="slide-gametalk"]',classPrefix:null,activeTriggerClass:"is-active",autoplay:!0,effect:"scrollx"}).render()},destroyCarousel:function(){carouselSlide.destroy(),gameTalkSlide.destroy()},checkLogin:function(){return dwUDBProxy.isLogin()?($(".mod-primary .ui-duowandou [data-role='login']").parent().hide(),!0):!1},login:function(){dwUDBProxy.login(function(){location.reload()})},renderReload:function(){$(".mod-primary .ui-duowandou .tp-mall").html(tplReload())}},C={init:function(){}};C.init(),seaLoader(function(a){V.init(a)})});
define("src/modules/index/ilike",function(require,exports,module){var seaLoader=require("src/modules/sealoader/sealoader");seaLoader(function(a){a.use(["arale/switchable/1.0.2/tabs"],function(a){new a({element:'[data-role="tab-git"]',classPrefix:null,triggerType:"click",activeTriggerClass:"is-active"})})});var ilike={tplList:function(obj){{var __t,__p="";Array.prototype.join}with(obj||{}){__p+="";for(var i=0;i<data.length;i++)__p+='\r\n<li class="g-col-gItem">\r\n    ',__p+=data[i].adid?'\r\n    <a adid="'+(null==(__t=data[i].adid)?"":__t)+'" rsid="'+(null==(__t=data[i].rsid)?"":__t)+'" href="'+(null==(__t=data[i].video_url)?"":__t)+'" target="_blank">\r\n    ':'\r\n    <a href="'+(null==(__t=data[i].video_url)?"":__t)+'" target="_blank">\r\n    ',__p+='\r\n        <div class="gItem-pic">\r\n            <img src="'+(null==(__t=data[i].video_cover)?"":__t)+'" alt="'+(null==(__t=data[i].video_title)?"":__t)+'">\r\n            <div class="gItem-mask"></div>\r\n            <div class="gItem-tag">'+(null==(__t=data[i].video_channel_name)?"":__t)+'</div>\r\n            <span class="gItem-vdIcon"></span>\r\n            <span class="gItem-vdTime">'+(null==(__t=data[i].video_duration)?"":__t)+'</span>\r\n        </div>\r\n        <h3 class="gItem-title" title="'+(null==(__t=data[i].video_title)?"":__t)+'">'+(null==(__t=data[i].video_title)?"":__t)+'</h3>\r\n        <div class="gItem-info">\r\n            <span>'+(null==(__t=data[i].user_nickname)?"":__t)+"</span>\r\n            <em>"+(null==(__t=data[i].video_play_num)?"":__t)+"</em>\r\n        </div>\r\n    </a>\r\n</li>\r\n";__p+=""}return __p},init:function(){$(".mod-ilike").on("click",".bt-refresh",function(){ilike.getData(!0)}),ilike.getData(),ilike.getAd(function(a){if(a){var _=ilike.tplList({data:[a]});$(".mod-ilike .g-col-gList li").eq(1).replaceWith(_)}})},getData:function(){var a=this,_="http://video.duowan.com/jsapi/videosKnowYou";$(".mod-ilike .g-col-tabPanel").hide(),$(".mod-ilike .g-col-bd").addClass("show-loading"),$.ajax({url:_,dataType:"jsonp",success:function(_){a.render(_)}})},render:function(a){var _=ilike.tplList({data:a});$(".mod-ilike .g-col-gList").html(_),$(".mod-ilike .g-col-bd").removeClass("show-loading"),$(".mod-ilike .g-col-tabPanel").show()},getAd:function(a){$.ajax({url:"http://gt.duowan.com/api/g?loc=duowandongni",dataType:"jsonp",jsonp:"jsonpilike",jsonpCallback:"jsonpilike",success:function(_){var c=_.ad_link.split("play/")[1],g=c.split(".")[0];g?$.ajax({url:"http://video.duowan.com/jsapi/getVideoInfo/?vids="+g,dataType:"jsonp",success:function(c){var v=c[g];v.rsid=_.rsid,v.adid=_.adid,a&&a(v)}}):a&&a(0)},error:function(){a&&a(0)}})}},gits={tplGits:function(obj){{var __t,__p="";Array.prototype.join}with(obj||{}){__p+="";for(var i=0;i<data.length;i++)__p+='\r\n    <li>\r\n        <div class="ilike-col ilike-col1">\r\n            <a href="'+(null==(__t=data[i].link)?"":__t)+'" target="_blank">'+(null==(__t=data[i].gift_name)?"":__t)+'</a>\r\n        </div>\r\n        <div class="ilike-col ilike-col3">剩余'+(null==(__t=data[i].left_count)?"":__t)+'</div>\r\n        <div class="ilike-col ilike-col4"><a href="'+(null==(__t=data[i].link)?"":__t)+'" target="_blank">领</a></div>\r\n    </li>\r\n';__p+=""}return __p},init:function(){gits.renderPhone()},getGitPcNum:function(a){var _=a.attr("data-id"),c="http://ka.duowan.com/tqappApi/getActGotNumber?actInfo="+_;$.ajax({url:c,dataType:"jsonp",success:function(_){a.find(".num").text(_.number)}})},renderPhone:function(){var a="http://ka.duowan.com/open/getRGifts";$.ajax({url:a,dataType:"jsonp",success:function(a){var _=gits.tplGits({data:a.data.m}),c=gits.tplGits({data:a.data.pc});$(".mod-ilike .tp-gits-phone").html(_),$(".mod-ilike .tp-gits-pc").html(c)}})},renderPcNum:function(){$(".mod-ilike .tp-gits-pc li").each(function(){var a=$(this);a.hasClass("is-active")||gits.getGitPcNum(a)})}};ilike.init(),gits.init()});
define("src/modules/index/hotgame",function(require){var a,c,g=require("src/modules/sealoader/sealoader"),h=require("src/modules/underscore/underscore"),v={init:function(c){c.use(["arale/switchable/1.0.2/tabs"],function(a){new a({element:'[data-role="tab-hotgame2"]',classPrefix:null,triggerType:"click",activeTriggerClass:"is-active"})}),c.use(["arale/switchable/1.0.2/carousel"],function(c){a=c,v.newCarousel()})},newCarousel:function(){var g,h;$(window).width()<1420?(g=340,h=4):(g=510,h=6),c=new a({element:'[data-role="carousel-hotgame"]',classPrefix:null,autoplay:!1,effect:"scrollx",step:h,viewSize:[g],activeIndex:0}).render()},destroyCarousel:function(){c.destroy()}},w={init:function(){$(window).on("resize",h.debounce(function(){v.destroyCarousel(),setTimeout(function(){v.newCarousel()},100)},100)),$(".mod-hotgame").on("mouseover",".ui-carousel__item",function(){var a=$(this),c=a.index(),g=$(".mod-hotgame .g-col-880 .g-col-bd .g-col-tabPanel").eq(c);a.addClass("is-active").siblings().removeClass("is-active"),g.removeClass("u-hide").siblings().addClass("u-hide"),g.find("img[data-src]").each(function(a,c){$(c).attr("src",$(c).attr("data-src")),$(c).removeAttr("data-src")})}),$(".mod-hotgame").on("click",".bt-hotgame",function(){var a=$(this).attr("href")||"";return dwUDBProxy.isLogin()?void 0:(dwUDBProxy.login(a),!1)})}};w.init(),g(function(a){v.init(a)})});
define("src/modules/index/fanplay",function(require,exports,module){var _=require("src/modules/underscore/underscore"),_24hoursTpl=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+="",_.each(list,function(_){__p+='\r\n<li>\r\n    <p class="news-time">'+(null==(__t=_.time)?"":__t)+'</p>\r\n    <a href="'+(null==(__t=_.url)?"":__t)+'" title="'+(null==(__t=_.title)?"":__t)+'">\r\n        <p class="news-title">'+(null==(__t=_.title)?"":__t)+"</p>\r\n    </a>\r\n</li>\r\n"}),__p+="";return __p},nextNews=function(){var _,a,c,h=1,w=function(){y.hide();var w=_.slice(h*c,++h*c);h==a&&(h=0),y.html(_24hoursTpl({list:w})),setTimeout(function(){y.show()},10)},j=$("#fanplay .hotnews-box"),y=j.children(".hotnews-list");return function(){_?w():$.ajax({url:"http://www.duowan.com/s/24HoursNews.json",dataType:"jsonp",jsonpCallback:"jsonp"}).done(function(h){200==h.code&&(_=h.data,c=h.duration||7,a=Math.ceil(_.length/c),w())})}}(),C={init:function(){$("#fanplay").on("click",".bt-refresh",_.throttle(nextNews,1e3))}};C.init()});
define("src/modules/index/rankBottom",function(require,exports,module){var seaLoader=require("src/modules/sealoader/sealoader");seaLoader(function(a){a.use(["arale/switchable/1.0.2/tabs"],function(a){new a({element:'[data-role="rankBottom-tab1"]',classPrefix:null,activeTriggerClass:"is-active"}),new a({element:'[data-role="rankBottom-tab2"]',classPrefix:null,activeTriggerClass:"is-active"}),new a({element:'[data-role="rankBottom-tab3"]',classPrefix:null,activeTriggerClass:"is-active"})})});var Rank={tplNew:function(obj){{var __t,__p="";Array.prototype.join}with(obj||{}){__p+="";for(var i=0;i<data.length;i++){__p+="\r\n";var $change=data[i].rank-data[i].last_rank;$change&&($change=0>$change?"has-rise":"has-fall");var $istop=3>i?"is-top":"",$isactive=0==i?"is-active":"";__p+='\r\n<li class="ui-list__item '+(null==(__t=$istop)?"":__t)+" "+(null==(__t=$change)?"":__t)+" "+(null==(__t=$isactive)?"":__t)+'">\r\n    <div class="ui-list__main">\r\n        <span class="ui-list__no">'+(null==(__t=i+1)?"":__t)+'</span>\r\n        <span class="ui-list__name"><a href="'+(null==(__t=data[i].url)?"":__t)+'">'+(null==(__t=data[i].game_name)?"":__t)+'</a></span>\r\n        <span class="ui-list__rank">'+(null==(__t=data[i].hot_num)?"":__t)+'</span>\r\n        <span class="ui-list__status"><i>---</i></span>\r\n    </div>\r\n    <div class="ui-list__detail">\r\n        <img src="'+(null==(__t=data[i].list_pic)?"":__t)+'" data-original="'+(null==(__t=data[i].list_pic)?"":__t)+'" alt="" class="ui-list__img">\r\n        <a class="ui-list__link" href="'+(null==(__t=data[i].portal_url.cn)?"":__t)+'">官网</a>\r\n        <a class="ui-list__vote" href="'+(null==(__t=data[i].url)?"":__t)+'">投票</a>\r\n    </div>\r\n</li>\r\n'}__p+=""}return __p},tplForward:function(obj){{var __t,__p="";Array.prototype.join}with(obj||{}){__p+="";for(var i=0;i<data.length;i++){__p+="\r\n";var $change="";0!=data[i].change&&($change=data[i].change>0?"has-rise":"has-fall");var $istop=3>i?"is-top":"",$isactive=0==i?"is-active":"";__p+='\r\n<li class="ui-list__item '+(null==(__t=$istop)?"":__t)+" "+(null==(__t=$change)?"":__t)+" "+(null==(__t=$isactive)?"":__t)+'">\r\n    <div class="ui-list__main">\r\n        <span class="ui-list__no">'+(null==(__t=i+1)?"":__t)+'</span>\r\n        <span class="ui-list__name"><a href="'+(null==(__t=data[i].url)?"":__t)+'">'+(null==(__t=data[i].game_name)?"":__t)+'</a></span>\r\n        <span class="ui-list__rank">'+(null==(__t=data[i].recom_num)?"":__t)+'</span>\r\n        <span class="ui-list__status"><i>---</i></span>\r\n    </div>\r\n    <div class="ui-list__detail">\r\n        <img src="'+(null==(__t=data[i].list_pic)?"":__t)+'" data-original="'+(null==(__t=data[i].list_pic)?"":__t)+'" alt="" class="ui-list__img">\r\n        <a class="ui-list__link" href="'+(null==(__t=data[i].cn)?"":__t)+'">官网</a>\r\n        <a class="ui-list__vote" href="'+(null==(__t=data[i].url)?"":__t)+'">投票</a>\r\n    </div>\r\n</li>\r\n'}__p+=""}return __p},tplTest:function(obj){{var __t,__p="";Array.prototype.join}with(obj||{}){__p+="";for(var i=0;i<data.length;i++){__p+="\r\n";var $date=data[i].beta_time.split("-");$date.shift(),$date=$date.join("-"),__p+='\r\n<li class="ui-list__item">\r\n    <span class="ui-list__col ui-list__date">'+(null==(__t=$date)?"":__t)+'</span>\r\n    <span class="ui-list__col ui-list__game"><a href="'+(null==(__t=data[i].url)?"":__t)+'" title="'+(null==(__t=data[i].game_name)?"":__t)+'">'+(null==(__t=data[i].game_name)?"":__t)+'</a></span>\r\n    <span class="ui-list__col ui-list__status '+(null==(__t="首测"==data[i].beta_number?"u-highlight":"")?"":__t)+'">'+(null==(__t=data[i].beta_number)?"":__t)+"</span>\r\n    ",__p+=data[i].dw_qz?'\r\n    <a href="'+(null==(__t=data[i].dw_qz)?"":__t)+'" class="ui-list__col ui-list__preview">\r\n        <i class="icon-preview"></i>\r\n    </a>\r\n    ':'\r\n    <span class="ui-list__col ui-list__preview">---</span>\r\n    ',__p+="\r\n    ",__p+=data[i].dw_sw?'\r\n    <a href="'+(null==(__t=data[i].dw_sw)?"":__t)+'" class="ui-list__col ui-list__try">\r\n        <i class="icon-try"></i>\r\n    </a>\r\n    ':'\r\n    <span class="ui-list__col ui-list__try">---</span>\r\n    ',__p+='\r\n    <span class="ui-list__col ui-list__other">\r\n        ',__p+=data[i].takepartads?'\r\n        <a href="'+(null==(__t=data[i].takepartads)?"":__t)+'" class="ui-list__green" title="">领</a>\r\n        ':'\r\n        <a href="javascript:;" class="ui-list__green is-none" title=""></a>\r\n        ',__p+='\r\n        <a href="'+(null==(__t=data[i].portal_url)?"":__t)+'" class="ui-list__orange" title="">官</a>\r\n    </span>\r\n</li>\r\n'}__p+=""}return __p},tplTestSy:function(obj){{var __t,__p="";Array.prototype.join}with(obj||{}){__p+="";for(var i=0;i<data.length;i++){__p+="\r\n";var $date=data[i].beta_time.split("-");$date.shift(),$date=$date.join("-"),__p+='\r\n<li class="ui-list__item">\r\n    <span class="ui-list__col ui-list__date">'+(null==(__t=$date)?"":__t)+'</span>\r\n    <span class="ui-list__col ui-list__game"><a href="'+(null==(__t=data[i].url)?"":__t)+'" title="'+(null==(__t=data[i].game_name)?"":__t)+'">'+(null==(__t=data[i].game_name)?"":__t)+'</a></span>\r\n    <span class="ui-list__col ui-list__status ext-test__status '+(null==(__t="首测"==data[i].beta_number?"u-highlight":"")?"":__t)+'">'+(null==(__t=data[i].beta_message)?"":__t)+'</span>\r\n    <span class="ui-list__col ui-list__type">'+(null==(__t=data[i].beta_number)?"":__t)+(null==(__t=data[i].type_name)?"":__t)+'</span>\r\n    <span class="ui-list__col ui-list__other">\r\n        <a href="http://ka.duowan.com/game_'+(null==(__t=data[i].game_id)?"":__t)+'.html" class="ui-list__green" title="">领</a>\r\n    </span>\r\n</li>\r\n'}__p+=""}return __p},init:function(){Rank.renderNew(),Rank.renderForward(),Rank.renderHot(),Rank.renderTestPc(),Rank.renderTestSy(),$(".mod-rankBottom").on("mouseenter",".ui-list__item",function(){$(this).addClass("is-active").siblings().removeClass("is-active")})},lazy:function(){$(".mod-rankBottom img").lazyload({failurelimit:5,skip_invisible:!1})},renderNew:function(){var a="http://ku.newgame.duowan.com/index.php?type=jsonp&r=api/Getranklist";$.ajax({url:a,dataType:"jsonp",success:function(a){var _=Rank.tplNew({data:a.rankList});$(".mod-rankBottom [data-entry='rank-new']").html(_)}})},renderForward:function(){var a="http://ku.newgame.duowan.com/index.php?type=jsonp&r=api/Getforwardlist";$.ajax({url:a,dataType:"jsonp",success:function(a){var _=Rank.tplForward({data:a.list});$(".mod-rankBottom [data-entry='rank-forward']").html(_)}})},renderHot:function(){var a="http://ku.newgame.duowan.com/index.php?type=jsonp&r=api/Getranklist&listName=hotgametop";$.ajax({url:a,dataType:"jsonp",success:function(a){var _=Rank.tplNew({data:a.rankList});$(".mod-rankBottom [data-entry='rank-hot']").html(_)}})},renderTestPc:function(){var a="http://ku.newgame.duowan.com/index.php?type=jsonp&r=api/Getnewgamebeta&pageSize=18&pageNum=1&is_push=1";$.ajax({url:a,dataType:"jsonp",success:function(a){var _=Rank.tplTest({data:a.list});$(".mod-rankBottom [data-entry='rank-test1']").html(_)}})},renderTestSy:function(){var a="http://sy.duowan.com/open/betaGame";$.ajax({url:a,dataType:"jsonp",success:function(a){var _=Rank.tplTestSy({data:a.data});$(".mod-rankBottom [data-entry='rank-test2']").html(_)}})}};Rank.init()});
define("src/modules/counter/counter",function(require,exports,module){function c(a){function h(){var c=I;setTimeout(function(){v()},1e3*w(1,8)),c.el.parents(".bt-refresh").on("click",function(){g()})}function v(){var c=I;c.el.parents(".bt-refresh").show(),b(),c.st=setInterval(function(){c.current+=w(1,5),b()},c.duration)}function g(){var c=I;c.el.parents(".bt-refresh").hide(),c.current=w(1,5),clearInterval(c.st),setTimeout(function(){v()},c.duration)}function b(){var c=I,a="<em style='color:#ef0404;font-weight:bold;margin:0 2px;'>"+c.current+"</em>个新视频";c.el.html(a)}function w(c,a){var h=a-c,v=Math.random();return c+Math.round(v*h)}var I=this,M={};this.config=$.extend(!0,M,a),this.el=$(this.config.el),this.duration=this.config.duration||5e3,this.current=w(1,5),this.st=null,h(),c=function(){return I}}module.exports=c});
define("src/modules/jquery.lazyload/jquery.lazyload",function(){!function(a,h,c,A){var g=a(h);a.fn.lazyload=function(v){function b(){var h=0;_.each(function(){var c=a(this);if(!y.skip_invisible||c.is(":visible"))if(a.abovethetop(this,y)||a.leftofbegin(this,y));else if(a.belowthefold(this,y)||a.rightoffold(this,y)){if(++h>y.failure_limit)return!1}else c.trigger("appear"),h=0})}var w,_=this,y={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:h,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return v&&(A!==v.failurelimit&&(v.failure_limit=v.failurelimit,delete v.failurelimit),A!==v.effectspeed&&(v.effect_speed=v.effectspeed,delete v.effectspeed),a.extend(y,v)),w=y.container===A||y.container===h?g:a(y.container),0===y.event.indexOf("scroll")&&w.bind(y.event,function(){return b()}),this.each(function(){var h=this,c=a(h);h.loaded=!1,(c.attr("src")===A||c.attr("src")===!1)&&c.is("img")&&c.attr("src",y.placeholder),c.one("appear",function(){if(!this.loaded){if(y.appear){var A=_.length;y.appear.call(h,A,y)}a("<img />").bind("load",function(){var A=c.attr("data-"+y.data_attribute);c.hide(),c.is("img")?c.attr("src",A):c.css("background-image","url('"+A+"')"),c[y.effect](y.effect_speed),h.loaded=!0;var g=a.grep(_,function(a){return!a.loaded});if(_=a(g),y.load){var v=_.length;y.load.call(h,v,y)}}).attr("src",c.attr("data-"+y.data_attribute))}}),0!==y.event.indexOf("scroll")&&c.bind(y.event,function(){h.loaded||c.trigger("appear")})}),g.bind("resize",function(){b()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&g.bind("pageshow",function(h){h.originalEvent&&h.originalEvent.persisted&&_.each(function(){a(this).trigger("appear")})}),a(c).ready(function(){b()}),this},a.belowthefold=function(c,v){var b;return b=v.container===A||v.container===h?(h.innerHeight?h.innerHeight:g.height())+g.scrollTop():a(v.container).offset().top+a(v.container).height(),b<=a(c).offset().top-v.threshold},a.rightoffold=function(c,v){var b;return b=v.container===A||v.container===h?g.width()+g.scrollLeft():a(v.container).offset().left+a(v.container).width(),b<=a(c).offset().left-v.threshold},a.abovethetop=function(c,v){var b;return b=v.container===A||v.container===h?g.scrollTop():a(v.container).offset().top,b>=a(c).offset().top+v.threshold+a(c).height()},a.leftofbegin=function(c,v){var b;return b=v.container===A||v.container===h?g.scrollLeft():a(v.container).offset().left,b>=a(c).offset().left+v.threshold+a(c).width()},a.inviewport=function(h,c){return!(a.rightoffold(h,c)||a.leftofbegin(h,c)||a.belowthefold(h,c)||a.abovethetop(h,c))},a.extend(a.expr[":"],{"below-the-fold":function(h){return a.belowthefold(h,{threshold:0})},"above-the-top":function(h){return!a.belowthefold(h,{threshold:0})},"right-of-screen":function(h){return a.rightoffold(h,{threshold:0})},"left-of-screen":function(h){return!a.rightoffold(h,{threshold:0})},"in-viewport":function(h){return a.inviewport(h,{threshold:0})},"above-the-fold":function(h){return!a.belowthefold(h,{threshold:0})},"right-of-fold":function(h){return a.rightoffold(h,{threshold:0})},"left-of-fold":function(h){return!a.rightoffold(h,{threshold:0})}})}(jQuery,window,document)});
define("src/modules/plusReport/plusReport",function(require,exports,module){!function(window,$){function PlusReport(){}var Util={getCookie:function(a){var c=document.cookie.match(new RegExp("(^| )"+a+"=([^;]*)(;|$)"));return null!=c?decodeURI(c[2]):null},isLogin:function(){return Util.getCookie("username")?!0:!1},getScriptArg:function(a){var c=document.getElementsByTagName("script"),h=c[c.length-1],g=h.src;return(g.match(new RegExp("(?:\\?|&)"+a+"=(.*?)(?=&|$)"))||["",null])[1]}};PlusReport.prototype={task_id:Util.getScriptArg("channel"),target_id:location.pathname.replace(/[^0-9]/g,""),yyuid:Util.getCookie("yyuid"),init:function(a,c){a&&(this.task_id=a),c&&(this.target_id=c),Util.isLogin()&&!Util.getCookie("dwtask_"+this.task_id+"_"+this.yyuid)&&this._inWhite()&&this._report()},_inWhite:function(){for(var a=Util.getCookie("username"),c=["dw_zhanchaojiang","dw_chenyan3","dw_luwenbing","dw_linzhixing","dw_chenjunqiang","dw_guoxiaocheng","dw_yanghaohao"],h=c.length,i=0;h>i;i++)if(a==c[i])return!0;return!1},_report:function(){var a=this,c="http://plus.duowan.com/task/report",h={task_id:a.task_id,target_id:a.target_id};$.ajax({url:c,data:h,type:"GET",dataType:"jsonp",withCredentials:!0}).done(function(c){0==c.code&&c.data&&c.data.title&&a._popup(c.data)})},_popup:function(data){var cssStyle='.popup-plus-report{width:100%;height:100%;position:fixed;top:0;left:0;z-index:2000;font-family:PingFang sc,"Helvetica Neue",Helvetica,Tahoma,Arial,"Liberation Sans","Hiragino Sans GB","Source Han Sans CN","Source Han Sans SC","Microsoft YaHei","Wenquanyi Micro Hei","WenQuanYi Zen Hei","ST Heiti",SimHei,"WenQuanYi Zen Hei Sharp",sans-serif}.popup-plus-report .mask-plus-report{width:100%;height:100%;background:#000;opacity:.5;-moz-opacity:.5;filter:alpha(opacity=50);position:absolute;top:0;left:0;z-index:1;box-shadow:0 0 10px 5px #CCC}.popup-plus-report .cont-plus-report{position:absolute;top:50%;left:50%;z-index:2;width:300px;margin:-100px 0 0 -200px;line-height:1;padding:40px 50px 30px;background:#FFF;text-align:center}.popup-plus-report .cont-plus-report h2{font-size:16px;color:#e94646}.popup-plus-report .cont-plus-report p{font-size:12px;color:#666;margin-top:27px}.popup-plus-report .cont-plus-report a{display:block;margin:23px auto 0;font-size:12px;color:#FFF;background:#e94646;width:80px;height:30px;line-height:30px}.popup-plus-report .cont-plus-report a:hover{text-decoration:none;background:#f45959}.popup-plus-report .btn-plus-report{position:absolute;top:20px;right:20px;width:10px;height:10px;background:url(http://pub.dwstatic.com/p/2017dw/1.4.0/img/icon-close2_18ae84c.png) no-repeat;cursor:pointer}',plusReportPopup=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="popup-plus-report">\r\n    <div class="mask-plus-report"></div>\r\n    <div class="cont-plus-report">\r\n        <h2>'+(null==(__t=data.title)?"":__t)+"</h2>\r\n        <p>"+(null==(__t=data.content)?"":__t)+'</p>\r\n        <a href="http://plus.duowan.com/account">账户明细</a>\r\n        <div class="btn-plus-report"></div>\r\n    </div>\r\n</div>';return __p};$("body").append("<style>"+cssStyle+"</style>"),$("body").append(plusReportPopup({data:data})),this._initPopup()},_initPopup:function(){$(".popup-plus-report .btn-plus-report").click(function(){$(".popup-plus-report").remove()})}},module.exports=PlusReport}(window,$)});
define("src/modules/page/index",function(require,exports,module){var seaLoader=require("src/modules/sealoader/sealoader"),_=require("src/modules/underscore/underscore"),Counter=require("src/modules/counter/counter");require("src/modules/jquery.lazyload/jquery.lazyload"),require("src/modules/plusReport/plusReport");var Index={init:function(a){a.use(["arale/switchable/1.0.2/tabs"],function(a){new a({element:'[data-role="tab-dance"]',classPrefix:null,triggerType:"click",activeTriggerClass:"is-active"}),new a({element:'[data-role="tab-ghost"]',classPrefix:null,triggerType:"click",activeTriggerClass:"is-active"}),new a({element:'[data-role="tab-life"]',classPrefix:null,triggerType:"click",activeTriggerClass:"is-active"}),new a({element:'[data-role="tab-mil"]',classPrefix:null,triggerType:"click",activeTriggerClass:"is-active"}),new a({element:'[data-role="tab-dwvideo"]',classPrefix:null,triggerType:"click",activeTriggerClass:"is-active"}),new a({element:'[data-role="tab-gallery1"]',classPrefix:null,activeTriggerClass:"is-active"});$(".mod-gallery").on("mouseover",".ui-tab__trigger",function(){var a=$(this).index(),c=$(".mod-gallery .g-col-tabPanel").eq(a);c.find("img[data-src]").each(function(a,c){$(c).attr("src",$(c).attr("data-src")),$(c).removeAttr("data-src")})})})},initSidebar:function(){var a=$("body,html"),c=$(".ui-sidebar"),g=c.find(".ui-backtotop"),v=!1,h=$(),w={id:[],done:[]},b=1200;c.css({right:($(window).width()-b)/2-78}),$(window).on("resize",_.debounce(function(){var a=1200;c.css({right:($(window).width()-a)/2-78})},100));var y=c.find(".ui-sidebar__list .ui-sidebar__item");y.find("a").each(function(){var a=$(this).attr("href");-1!=a.indexOf("#")&&(h=h.add($(a)),w.id.push(a))});var k=h.length,C=$();$(window).on("scroll",function(){var a=$(window).scrollTop(),c=$(document).height()/5;a>c&&!v?(g.stop().fadeIn(300),v=!0):c>=a&&v&&(g.stop().fadeOut(300),v=!1);var i=0;h.each(function(){var c=$(this).offset().top;return c-50>=a?(i--,!1):void i++}),i=0>i?0:i>=k?k-1:i;var b=y.eq(i);C.is(b)||(b.addClass("is-active"),C.removeClass("is-active"),C=b),w.now=i,$(window).trigger("scroll:lazy",w)}).on("resize:narrow",function(){body.addClass("g-narrow")}).on("resize:wide",function(){body.removeClass("g-narrow")}).on("resize",function(){var a=$(window).width();1356>a?c.stop().hide():c.fadeIn()}),g.on("click",function(){var c=$(window).scrollTop();a.stop().animate({scrollTop:0},300+(c-36)/20,"linear",function(){$(window).trigger("scroll")})}),$(".ui-sidebar__list").on("click",".ui-sidebar__item a",function(){var c=$(this).attr("href");if(-1!=c.indexOf("#")){var g=this,v=$(window).scrollTop(),w=h.eq($(this).parent().index()).offset().top;return a.stop().animate({scrollTop:w},300+Math.abs((v-w)/20),"linear",function(){$(window).trigger("scroll"),window.location.hash=$(g).attr("href")}),!1}})},initBtnRefresh:function(){var gRowTpl=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{}){__p+="";for(var i=0;i<data.length;i++)__p+='\r\n<li class="g-col-gItem">\r\n    <a href="'+(null==(__t=data[i].video_url)?"":__t)+'" target="_blank">\r\n        <div class="gItem-pic">\r\n            <img src="'+(null==(__t=data[i].video_cover)?"":__t)+'" alt="'+(null==(__t=data[i].video_title)?"":__t)+'">\r\n            <div class="gItem-mask"></div>\r\n            <span class="gItem-tag">'+(null==(__t=data[i].video_channel_name)?"":__t)+'</span>\r\n            <span class="gItem-vdIcon"></span>\r\n            <span class="gItem-vdTime">'+(null==(__t=data[i].video_duration)?"":__t)+'</span>\r\n        </div>\r\n        <h3 class="gItem-title">'+(null==(__t=data[i].video_title)?"":__t)+'</h3>\r\n        <div class="gItem-info">\r\n            <span>'+(null==(__t=data[i].user_nickname)?"":__t)+"</span>\r\n            <em>"+(null==(__t=data[i].video_play_num)?"":__t)+"</em>\r\n        </div>\r\n    </a>\r\n</li>\r\n";__p+=""}return __p};$("#carton, #dance, #ghost, #life, #tech, #mil, #dwvideo").on("click",".bt-refresh",function(){var a=$(this),c=a.parents(".g-row"),g=a.attr("data-page")||2;g=g>=10?2:g;var v={channel:a.attr("data-channel")||"",tag:a.attr("data-tag")||"",sortBy:"month",page:g};c.find(".g-col-bd").addClass("show-loading"),c.find(".g-col-tabPanel").hide(),$.ajax({url:"http://video.duowan.com/jsapi/getRankByTag",data:v,dataType:"jsonp",success:function(v){var h;if(v&&v.length>0){var w=gRowTpl({data:v});c.find(".g-col-gList").html(w),h=parseInt(g)+1}else h=2;a.attr("data-page",h),c.find(".g-col-bd").removeClass("show-loading"),c.find(".g-col-tabPanel").show()}})})},checkNarrow:function(){$(window).width()<1420?$("body").addClass("g-narrow"):$("body").removeClass("g-narrow")},initA3Banner:function(){$.fn.extend({open:function(a){var c={wide:{normal:305,active:895},narrow:{normal:255,active:765}},g=$("body").hasClass("g-narrow")?"narrow":"wide";return $(window).on("resize:narrow",function(){g="narrow"}).on("resize:wide",function(){g="wide"}),this.each(function(){var v=$(this).find("ul"),h=v.children();h.hover(function(){var h=$(this).index();$(this).find(a).stop().animate({width:c[g].active}),v.stop().animate({marginLeft:h?-(h*c[g].normal):0})},function(){$(this).find(a).stop().animate({width:0}),v.stop().animate({marginLeft:0})})})}}),$(".ui-business.ext-slide").open(".ui-business__bd")},checkAd:function(){$(".mod-banner3").each(function(i,e){0==$(e).find("a, img").length&&$(e).hide()})},initCounter:function(){new Counter({el:".mod-ilike .bt-refresh em"}),setTimeout(function(){new Counter({el:"#carton .bt-refresh em"}),new Counter({el:"#dance .bt-refresh em"}),new Counter({el:"#ghost .bt-refresh em"})},1e3),setTimeout(function(){new Counter({el:"#life .bt-refresh em"}),new Counter({el:"#tech .bt-refresh em"}),new Counter({el:"#mil .bt-refresh em"}),new Counter({el:"#dwvideo .bt-refresh em"})},2e3)},initLazyload:function(){$(".mod-hotgame img").lazyload({failurelimit:5,skip_invisible:!1}),$(".mod-fanplay img").lazyload({failurelimit:5,skip_invisible:!1}),$(".mod-boke img").lazyload({failurelimit:5,skip_invisible:!1}),$(".mod-carton img").lazyload({failurelimit:5,skip_invisible:!1}),$(".mod-dance img").lazyload({failurelimit:5,skip_invisible:!1}),$(".mod-ghost img").lazyload({failurelimit:5,skip_invisible:!1}),$(".mod-life img").lazyload({failurelimit:5,skip_invisible:!1}),$(".mod-tech img").lazyload({failurelimit:5,skip_invisible:!1}),$(".mod-dwvideo img").lazyload({failurelimit:5,skip_invisible:!1}),$(".mod-gallery img").lazyload({failurelimit:5,skip_invisible:!1}),$(".mod-rankBottom img").lazyload({failurelimit:5,skip_invisible:!1})},initDwstatic:function(){function a(a){var c=a.data("ckstat"),g="http://clickstats.duowan.com/index.php?r=stats/index&event=";c&&setTimeout(function(){(new Image).src=g+encodeURIComponent(c)},100)}$("[data-dwclick]").off("click"),$("[data-dwhover]").off("mouseenter"),$(document).on("click","[data-dwclick]",function(){a($(this))}),$(document).on("mouseenter","[data-dwhover]",function(){a($(this))})}},pageVisibility=function(){var a,c=function(a,c){return""!==a?a+c.slice(0,1).toUpperCase()+c.slice(1):c},g=function(){var g=!1;return"number"==typeof window.screenX&&["webkit","moz","ms","o",""].forEach(function(v){0==g&&void 0!=document[c(v,"hidden")]&&(a=v,g=!0)}),g}(),v=function(){return g?document[c(a,"hidden")]:void 0},h=function(){return g?document[c(a,"visibilityState")]:void 0};return{hidden:v(),visibilityState:h(),visibilitychange:function(c,w){return w=w||!1,g&&"function"==typeof c?($(document).one("visibilitychange:once",c),document.addEventListener(a+"visibilitychange",function(a){this.hidden=v(),this.visibilityState=h(),c.call(this,a)}.bind(this),w)):void 0}}}(),isSupportCSS3="undefined"!=typeof $("body").css("transition");if(!isSupportCSS3&&pageVisibility.visibilityState){var isPause=!1;pageVisibility.visibilitychange(function(){pageVisibility.hidden&&!isStop?(progressbar.stop(),isPause=!0):!pageVisibility.hidden&&isPause&&(progressbar.start(),isPause=!1)})}!function(){if(pageVisibility.visibilityState){var a=document.title,c=$("title").attr("leave");c=c?c:a,pageVisibility.visibilitychange(function(){document.title=pageVisibility.hidden?c:a})}}(),Index.initSidebar(),Index.initBtnRefresh(),Index.initA3Banner(),Index.initCounter(),Index.initLazyload(),Index.initDwstatic(),setTimeout(function(){Index.checkAd()},1e3),seaLoader(function(a){Index.init(a)})});
